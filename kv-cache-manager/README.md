# KV Cache Manager для SillyTavern

Расширение для управления KV-кешем llama.cpp в SillyTavern.

## Функциональность

- **Автоматическое сохранение**: Сохранение кеша автоматически раз в N сообщений
- **Ручное сохранение с именем**: Сохранение кеша с указанным именем для всех активных слотов
- **Автозагрузка**: Автоматическая загрузка последнего сохраненного кеша при переключении на чат
- **Ротация файлов**: Автоматическое удаление старых автосохранений при превышении лимита
- **Интеграция с slot manager**: Поддержка групповых чатов с несколькими слотами

## Установка

Через меню расширений SillyTavern.

### Ручная установка

1. Скопируйте папку `kv-cache-manager` в `public/scripts/extensions/` вашей установки SillyTavern
2. Перезагрузите страницу SillyTavern
3. Расширение появится в настройках на вкладке "KV Cache Manager"

## Использование

### Автоматическое сохранение

1. Включите автосохранение в настройках
2. Установите интервал сохранения (по умолчанию 5 сообщений)
3. Кеш будет автоматически сохраняться после каждого N-го сообщения

### Ручное сохранение

1. Введите имя для сохранения
2. Нажмите кнопку "Сохранить с именем"
3. Кеш будет сохранен для всех активных слотов с указанным именем

### Загрузка кеша

1. Нажмите кнопку "Загрузить кеш"
2. Выберите файл из списка
3. Кеш будет загружен в соответствующие слоты

## Настройки

- **Включить автосохранение**: Включить/выключить автоматическое сохранение
- **Сохранять каждые N сообщений**: Интервал автоматического сохранения
- **Автозагрузка при переключении на чат**: Автоматическая загрузка кеша при переключении
- **Максимум файлов на сессию**: Лимит автосохранений (старые удаляются автоматически)
- **Показывать уведомления**: Показывать уведомления о сохранении/загрузке
- **Проверять валидность кеша**: Проверять наличие токенов перед сохранением

## Формат файлов

- **Автосохранения**: `{chat_name}_slot{slot_id}_{timestamp}.bin`
- **Ручные сохранения**: `{user_name}_{chat_name}_slot{slot_id}_{timestamp}.bin`

## Требования

- SillyTavern с поддержкой расширений
- llama.cpp сервер с поддержкой KV-кеша
- Расширение llama.cpp-slot-manager (для групповых чатов)

## Лицензия

MIT

